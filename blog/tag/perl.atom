<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>tadegenban.github.io/blog/tag/perl/index.html</id>
    <title>TADEGENBAN</title>
    <updated>2014-09-23T22:14:33Z</updated>
    <link rel="self" href="tadegenban.github.io/blog/tag/perl.atom"/>
    <link rel="alternate" href="tadegenban.github.io/blog/tag/perl/index.html"/>
    <generator version="0.022">Statocles</generator>
    <entry>
        <id>tadegenban.github.io/blog/2014/09/23/my-our-local-state.html</id>
        <title>perl 变量作用域 my our local state</title>
        <author><name>tadegenban</name></author>
        <link rel="alternate" href="tadegenban.github.io/blog/2014/09/23/my-our-local-state.html" />
        <content type="html"><![CDATA[
            <h1>"nothing" -- 包作用域， 全局变量</h1>

<pre><code>$foo = 1;
</code></pre>

<p>在perl早期的时候，大家都是这么定义变量的。</p>

<p>这么定义变量$foo将会是全局变量，也就是在程序的任何位置都能访问到它。</p>

<p>这样当代码比较长时，会导致一个严重的问题，变量污染，比如：</p>

<pre><code>$foo = 1; // $foo -&gt; 1
f();
          // $foo -&gt; 2
sub f {
   $foo = 2;
}
</code></pre>

<p>如果不小心命名，则很容易在某个意想不到的位置，变量$foo被赋值，出现bug。</p>

<p>所以现在这种用法已经废弃了，在一些教程书中会这么开始教学，但这种用法在实际代码中是绝对不建议再使用的。</p>

<p>取而代之的是 my</p>

<h1>my -- 词法作用域， 局部变量</h1>

<pre><code>my $foo = 1;
</code></pre>

<p>my 的出现，极大的解决了变量污染的问题，因为my所声明的变量是局部变量，词法作用域。</p>

<p>局部变量的概念，比较好理解，比如：</p>

<pre><code>my $foo = 1; // $foo -&gt; 1
f();
             // $foo -&gt; 1
sub f {
   my $foo = 2 // $foo -&gt; 2
}
</code></pre>

<p>在函数f中的$foo 之在局部范围内起作用，出了函数之后，就不再起作用，所以也就不会影响到外部的$foo</p>

<p>需要理解的是这里的词法作用域，这里一个词法作用域，基本上就是一个BLOCK，也就是一个花括号阔住的范围。</p>

<p>所以，只要一个BLOCK就会建立一个词法作用域，比如：</p>

<pre><code>my $foo = 1; // $foo -&gt; 1
f();
             // $foo -&gt; 1
sub f {
    my $foo = 2 // $foo -&gt; 2
    if ( 1 ) {
        my $foo = 3 // $foo -&gt; 3
    }
}
</code></pre>

<p>这里在函数f内部的if语句中，建立一个新的词法作用域，同样对这里的$foo赋值不会影响到外部的$foo</p>

<p>my基本上已经够用了，下面来看看our</p>

<h1>our -- 包作用域， 全局变量</h1>

<p>...</p>

<h1>local -- 包作用域, 全局变量的假名</h1>

<p>...</p>

<h1>state -- 词法作用域, 静态变量</h1>

<p>...</p>

<h1>总结</h1>

<p>...</p>

                <p><a href="tadegenban.github.io/blog/2014/09/23/my-our-local-state.html#section-2">Continue reading...</a></p>
            <p>Tags:
                <a href="/blog/tag/perl/index.html">perl</a>
            </p>
        ]]></content>
        <updated>2014-09-23T00:00:00Z</updated>
        <category term="ARRAY(0x35d1918)" />
    </entry>
</feed>

